# Обзор архитектуры

Проект организован как монорепозиторий с центральной библиотекой `common`, содержащей общие компоненты. Это позволяет избежать дублирования кода между различными частями системы.

## Структура

- `api/`: FastAPI приложение, предоставляющее REST API для фронтенда. Зависит от `common`.
- `scraper/`: Компонент для скрапинга данных с сайта FIPI. Зависит от `common`.
- `scripts/`: Вспомогательные скрипты (миграция, индексация и т.д.). Зависит от `common`.
- `common/`: Общая библиотека, содержащая:
  - `models/`: Pydantic и SQLAlchemy модели.
  - `utils/`: Stateless утилиты.
  - `processors/`: Обработчики данных (независимые от BrowserManager/Playwright).
  - `services/`: Общая бизнес-логика.
  - `config/`: Конфигурационные файлы.
- `frontend/`: Клиентская часть (PWA).
- `data/`: Локальные данные (базы данных, файлы задач).
- `docs/`: Документация.
- `utils/`: Вспомогательные утилиты, зависящие от BrowserManager/Playwright. **Не перенесены в `common`.**
- `models/`: Модели данных. **Часть файлов была перенесена в `common/models/`. Остальные файлы остаются здесь.**
- `processors/`: Процессоры данных. **Часть файлов, не зависящих от BrowserManager/Playwright, была перенесена в `common/processors/`. Остальные файлы остаются здесь.**
- `services/`: Сервисы. **Часть файлов была перенесена в `common/services/`. Остальные файлы остаются здесь.**

## Взаимодействие

Компоненты (`api`, `scraper`, `scripts`) импортируют общие модели и утилиты из `common`. Это обеспечивает согласованность данных и уменьшает дублирование. Файлы в старых директориях (`utils/`, `models/`, `processors/`, `services/`), которые не были перенесены, могут зависеть от `common` или выполнять логику, специфичную для старой архитектуры или зависящую от `BrowserManager`/`Playwright`.
